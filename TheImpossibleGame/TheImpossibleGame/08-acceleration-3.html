<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Acceleration 3</title>
  </head>

  <body style="background-color:black;margin:0">

    <header>
     
    </header>
    <canvas id="canvas" width="500" height="600" style="background-color:azure;display:block"></canvas>
    <img src="images/zombie.png" id = "zombie" style="display:none"/>
    <img src="images/player.png" id = "player" style="display:none"/>
    <img src="images/brick_wall.png" id = "wall" style="display:none"/>
    
    <script src="js/utils.js"></script>
    <script src="./js/classes/player.js"></script>
    <script src="./js/classes/enemy.js"></script>
    <script src="./js/classes/wall.js"></script>
    
     <script>
        window.onload = function () {
            var canvas = document.getElementById('canvas');
            context = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
                player = new Player();
                vx = 0,
                vy = 0,
                ax = 0,
                ay = 0;

            player.x = player.width;
            player.y = player.height;

         

           var wall = new Array();

           


            

            window.addEventListener('keydown', function (event) {
                switch (event.keyCode) {
                    case 37:      //left
                        ax = -0.2;
                        break;
                    case 39:      //right
                        ax = 0.2;
                        break;
                    case 38:      //up
                        ay = -0.2;
                        break;
                    case 40:      //down
                        ay = 0.2;
                        break;
                }
            }, false);

            window.addEventListener('keyup', function (event) {
                switch (event.keyCode) {
                    case 37:      //left
                        ax = 0;
                        vx = 0;
                        break;
                    case 39:      //right
                        ax = 0;
                        vx = 0;
                        break;
                    case 38:      //up
                        ay = 0;
                        vy = 0;
                        break;
                    case 40:      //down
                        ay = 0;
                        vy = 0;
                        break;
                }
              
            }, false);

          

            (function drawFrame() {
                window.requestAnimationFrame(drawFrame, canvas);
                context.clearRect(0, 0, canvas.width, canvas.height);


                player.move()

                
                i=0;
                while (i <= canvas.width) {
                    wall[i] = new Wall(32, i, 0);
                    wall[i].draw(context);
                    if (window.utils.intersectsWall(player, wall[i])) {
                        player.x = player.x - vx;
                        player.y = player.y - vy;
                    }
                    wall[i] = new Wall(32, i, canvas.height/2 - 16);
                    wall[i].draw(context);
                    if (window.utils.intersectsWall(player, wall[i])) {
                        player.x = player.x - vx;
                        player.y = player.y - vy;
                    }
                    i += 16;
                }
                               
                                    i = 0;
                                    while (i <= canvas.height ) {
                                        wall[i] = new Wall(32, 0, i);
                                        wall[i].draw(context);
                                        if (window.utils.intersectsWall(player, wall[i])) {
                                            player.x = player.x - vx;
                                            player.y = player.y - vy;
                                        }
                                        wall[i] = new Wall(32, canvas.width/2 -16, i);
                                        wall[i].draw(context);
                                        if (window.utils.intersectsWall(player, wall[i])) {
                                            player.x = player.x - vx;
                                            player.y = player.y - vy;
                                        }
                                        i += 16
                                    }
 
                                           

                player.draw(context);
            }());
        };
    </script>
  </body>
</html>

