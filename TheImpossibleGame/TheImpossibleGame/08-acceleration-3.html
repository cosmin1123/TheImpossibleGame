<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Acceleration 3</title>
  </head>

  <body style="background-color:black;margin:0">

    
    <canvas id="canvas" style="background-color:azure;display:block"></canvas>
    <img src="images/fireball.png" id = "obstacle" style="display:none"/>
    <img src="images/shuriken.png" id = "obstacle2" style="display:none"/>
    <img src="images/player.png" id = "player" style="display:none"/>
    <img src="images/brick_wall.png" id = "wall" style="display:none"/>
    
    <script src="js/utils.js"></script>
    <script src="./js/classes/player.js"></script>
    <script src="./js/classes/enemy.js"></script>
    <script src="./js/classes/wall.js"></script>
    <script src="./js/classes/draw_wall.js"></script>
    <script src="./js/classes/map.js"></script>
        
     <script>
     
		var vx = 0;
	    var vy = 0;
        var ax = 0;
        var ay = 0;
        var scalePercentageX = 0;
        window.onload = function () {
            var canvas = document.getElementById('canvas');
            context = canvas.getContext('2d');
            
            scalePercentageX = window.innerWidth / 1600;
            scalePercentageY = window.innerHeight / 900;
            
            canvas.width = 1600 * scalePercentageX;
            canvas.height = 900 * scalePercentageY;
        
            player = new Player("player",Math.round(30 * scalePercentageX),
            Math.round(30 * scalePercentageY), Math.round(50 * scalePercentageX),
            Math.round(50 * scalePercentageY));
                
            enemy = init_enemy();
            init_map(canvas);

            window.addEventListener('keydown', function (event) {
                switch (event.keyCode) {
                    case 37:      //left
                        ax = -1;
                        break;
                    case 39:      //right
                        ax = 1;
                        break;
                    case 38:      //up
                        ay = -1;
                        break;
                    case 40:      //down
                        ay = 1;
                        break;
                }
            }, false);
            window.addEventListener('keyup', function (event) {
                switch (event.keyCode) {
                    case 37:      //left
                        ax = 0;
                        vx = 0;
                        break;
                    case 39:      //right
                        ax = 0;
                        vx = 0;
                        break;
                    case 38:      //up
                        ay = 0;
                        vy = 0;
                        break;
                    case 40:      //down
                        ay = 0;
                        vy = 0;
                        break;
                }
              
            }, false);
           (function drawFrame() {
                window.requestAnimationFrame(drawFrame, canvas);
                player.move();
                for (var i = 1; i < enemy.length;i++){
                    enemy[i].move();
                    enemy[i].draw();
                }

            }());
        };
    </script>
  </body>
</html>
